{% extends 'grievance/website_base.html' %}
{% load static %}

{% block content %}


<div class="row" id="mainContent">
    <div class="table-light site-section d-flex justify-content-center col-md-3">
        <div class="btn-group-toggle btn p-1 pl-2 mt-5" id="typeOfPage">
            <br>
            <input class="btn mt-2 btn-outline-warning" type="button" name="type" id="viewInformativeQueryDiv" value="        Informative Query        " onclick="changeDisplayDiv(2)">
            <br>
            <input class="btn mt-2 btn-outline-success" type="button" name="type" id="viewNonInformativeQueryDiv" value="Station Change Application" onclick="changeDisplayDiv(1)">
            <br>
        </div>
    </div>

    <div class="table-light site-section col-md-8 text-center" id="instructions">
        <br><br>
        <h1 class="text-dark"> PS Allottment Clarification </h1>
        <p class="text-dark"> There are two types of Clarification Forms (Queries) that a student can fill: </p>
        <h3 class="text-dark"> 1) Informative Query </h3>
        <p class="text-dark"> To be used when a student has to ask any specific doubts </p>
        <h3 class="text-dark"> 2) Station Change Application </h3>
        <p class="text-dark"> To be used when a student wants to apply for a change in PS Station  </p>
        <p class="text-danger"> <b>Note</b>: Each type of Form can be filled a maximum of 3 times. After 3 attempts,<br> no further requests will be considered. Kindly fill the forms judiciously. </p>

        <br>
        <h1 class="text-dark"> Deadline </h1>
        <p class="text-dark"> Deadline for each attempt is as follows: </p>
        <p class="text-dark"> <b>Attempt 1:</b> {{deadlines.0}} </p>
        <p class="text-dark"> <b>Attempt 2:</b> {{deadlines.1}} </p>
        <p class="text-dark"> <b>Attempt 3:</b> {{deadlines.2}} </p>
    </div>

    <div class="table-light site-section col-md-8 mt-5" id="informativeQueryDiv">
        <form class="signup-form1 shadow p-3 mb-5 table-light rounded text-center" id="informativeQuery1Form" action="" method="post" readonly> 
            {% csrf_token %}
                <h2 class="text-center"> Query 1 </h2>
                <br/>

                <div class="form-group row">
                    <label class="col-md-3 col-form-label">Status</label>
                    <div class="col-md-5 ml-3"><label id="informativeQuery1Status" name="status" class="btn btn-success text-light ml-5">Success</label></div>
                </div>

                <div class="form-group row">
                    <label class="col-md-3">Allotted Station Name*</label>
                    <div class="col-md-9">
                        <input type="text" class="form-control" id="informativeQueryAllocatedStation" name="informativeQueryAllocatedStation" placeholder="XYZ Pvt. Ltd., Goa" required>
                    </div>
                </div>

                <div class="form-group row">
                    <label class="col-md-3">Pref No. of Alloted Station*</label>
                    <div class="col-md-9">
                        <input type="number" class="form-control" id="informativeQueryPreferenceNumberOfAllocatedStation" name="informativeQueryPreferenceNumberOfAllocatedStation" placeholder="As on PSMS" required>
                    </div>
                </div>

                <fieldset id="informativeQuery1Entries">
                    <div class="form-group row" id="informativeQuery1DescriptionDiv">
                        <label class="col-md-3">Description of Query*</label>
                        <div class="col-md-9">
                            <textarea class="form-control" id="informativeQuery1Description" rows="4" cols="20" name="description" placeholder="Description" required></textarea>
                        </div>
                    </div>
                </fieldset>

                <div class="form-group text-center">
                    <button type="submit" id="informativeQuery1Submit" name="informativeQuery1Submit" value="informativeQuery1Submit" class="btn btn-default" style="background-color: #428bca; color: white">Submit</button>
                </div>

                <div class="form-group row" id="informativeQuery1ReplyDiv">
                    <label class="col-sm-3 col-form-label">Comments by authorities</label>
                    <div class="col-sm-9">
                        <textarea class="form-control" id="informativeQuery1Reply" rows="4" cols="20" readonly></textarea>
                    </div>
                </div>
        </form>

        <form class="signup-form1 shadow p-3 mb-5 table-light rounded text-center" id="informativeQuery2Form" action="" method="post" readonly> 
            {% csrf_token %}
                <h2 class="text-center"> Query 2 </h2>
                <br/>

                <div class="form-group row">
                    <label class="col-md-3 col-form-label">Status</label>
                    <div class="col-md-5 ml-3"><label id="informativeQuery2Status" name="status" class="btn btn-success text-light ml-5">Success</label></div>
                </div>

                <fieldset id="informativeQuery2Entries">
                    <div class="form-group row" id="informativeQuery2DescriptionDiv">
                        <label class="col-md-3">Description of Query*</label>
                        <div class="col-md-9">
                            <textarea class="form-control" id="informativeQuery2Description" rows="4" cols="20" name="description" placeholder="Description" required></textarea>
                        </div>
                    </div>
                </fieldset>

                <div class="form-group text-center">
                    <button type="submit" id="informativeQuery2Submit" name="informativeQuery2Submit" value="informativeQuery2Submit" class="btn btn-default" style="background-color: #428bca; color: white">Submit</button>
                </div>

                <div class="form-group row" id="informativeQuery2ReplyDiv">
                    <label class="col-sm-3 col-form-label">Comments by authorities</label>
                    <div class="col-sm-9">
                        <textarea class="form-control" id="informativeQuery2Reply" rows="4" cols="20" readonly></textarea>
                    </div>
                </div>
        </form>

        <form class="signup-form1 shadow p-3 mb-5 table-light rounded text-center" id="informativeQuery3Form" action="" method="post" readonly> 
            {% csrf_token %}
                <h2 class="text-center"> Query 3 </h2>
                <br/>

                <div class="form-group row">
                    <label class="col-md-3 col-form-label">Status</label>
                    <div class="col-md-5 ml-3"><label id="informativeQuery3Status" name="status" class="btn btn-success text-light ml-5">Success</label></div>
                </div>

                <fieldset id="informativeQuery2Entries">
                    <div class="form-group row" id="informativeQuery3DescriptionDiv">
                        <label class="col-md-3">Description of Query*</label>
                        <div class="col-md-9">
                            <textarea class="form-control" id="informativeQuery3Description" rows="4" cols="20" name="description" placeholder="Description" required></textarea>
                        </div>
                    </div>
                </fieldset>

                <div class="form-group text-center">
                    <button type="submit" id="informativeQuery3Submit" name="informativeQuery3Submit" value="informativeQuery3Submit" class="btn btn-default" style="background-color: #428bca; color: white">Submit</button>
                </div>

                <div class="form-group row" id="informativeQuery3ReplyDiv">
                    <label class="col-sm-3 col-form-label">Comments by authorities</label>
                    <div class="col-sm-9">
                        <textarea class="form-control" id="informativeQuery3Reply" rows="4" cols="20" readonly></textarea>
                    </div>
                </div>
        </form>

        <div id="noMoreInformativeApplications">
            <p class="text-danger text-center"> No more applications allowed </p>
        </div>

    </div>

    <script type="text/javascript">
        function getInformativeQueryStatusToWords(status_value){
            if(status_value == 0){
                return "Not Sent";
            }
            else if(status_value == 1){
                return "In Progress";   
            }
            else if(status_value == 2){
                return "Replied";   
            }
        }

        function getInformativeQueryStatusClass(status_value){
            if(status_value == 0){
                return "btn btn-info text-light ml-5 px-5";
            }
            else if(status_value == 1){
                return "btn btn-warning text-light ml-5 px-5";   
            }
            else if(status_value == 2){
                return "btn btn-success text-light ml-5 px-5";   
            }
        }

        var informativeQueryStatuses = {{ informativeQueryStatuses|safe }};
        var informativeQueryDescriptions = {{ informativeQueryDescriptions|safe }}
        if(informativeQueryStatuses[0] != 0){
            document.getElementById("informativeQueryAllocatedStation").value = "{{ informativeQueryAllocatedStation }}";
            document.getElementById("informativeQueryAllocatedStation").readOnly = true;

            document.getElementById("informativeQueryPreferenceNumberOfAllocatedStation").value = "{{ informativeQueryPreferenceNumberOfAllocatedStation }}";
            document.getElementById("informativeQueryPreferenceNumberOfAllocatedStation").readOnly = true;

        }

        var informativeQueryComments = {{ informativeQueryComments|safe }};

        for (var i = 1; i <= 3; i++){
            var element = "informativeQuery" + i.toString() + "Reply";
            document.getElementById(element).value = informativeQueryComments[i - 1];

            element = "informativeQuery" + i.toString() + "Status";
            document.getElementById(element).textContent = getInformativeQueryStatusToWords(informativeQueryStatuses[i - 1]);
            document.getElementById(element).className = getInformativeQueryStatusClass(informativeQueryStatuses[i - 1]);

            element = "informativeQuery" + i.toString() + "Description";
            if(informativeQueryStatuses[i - 1] != 0){
                document.getElementById(element).value = informativeQueryDescriptions[i - 1];
                document.getElementById(element).readOnly = true;
            }
        }

        if(!(informativeQueryStatuses[1] >= 2)){
            document.getElementById("noMoreInformativeApplications").style.display = "none";
        }

        if(informativeQueryStatuses[0] == 0){
            document.getElementById("informativeQuery1ReplyDiv").style.display = "none";
            document.getElementById("informativeQuery2Form").style.display = "none";
        }
        else if(informativeQueryStatuses[0] == 1){
            document.getElementById("informativeQuery1Submit").style.display = "none";
            document.getElementById("informativeQuery1ReplyDiv").style.display = "none";
            document.getElementById("informativeQuery2Form").style.display = "none";
        }
        else if(informativeQueryStatuses[0] == 2){
            document.getElementById("informativeQuery1Submit").style.display = "none";
        }

        if(informativeQueryStatuses[1] == 0){
            document.getElementById("informativeQuery2ReplyDiv").style.display = "none";
            document.getElementById("informativeQuery3Form").style.display = "none";
        }
        else if(informativeQueryStatuses[1] == 1){
            document.getElementById("informativeQuery2Submit").style.display = "none";
            document.getElementById("informativeQuery2ReplyDiv").style.display = "none";
            document.getElementById("informativeQuery3Form").style.display = "none";
        }
        else if(informativeQueryStatuses[1] == 2){
            document.getElementById("informativeQuery2Submit").style.display = "none";
        }

        if(informativeQueryStatuses[2] == 0){
            document.getElementById("informativeQuery3ReplyDiv").style.display = "none";
        }
        else if(informativeQueryStatuses[2] == 1){
            document.getElementById("informativeQuery3Submit").style.display = "none";
            document.getElementById("informativeQuery3ReplyDiv").style.display = "none";
        }
        else if(informativeQueryStatuses[2] == 2){
            document.getElementById("informativeQuery3Submit").style.display = "none";
        }   
    </script>



    <div class="table-light site-section col-md-8 mt-5" id="nonInformativeQueryDiv">

        <form class="signup-form1 shadow p-3 mb-5 table-light rounded text-center" id="application1Form" action="/CMS/student/" method="post" readonly  enctype="multipart/form-data">
            {% csrf_token %}
            <h2 class="text-center">Station Change Application Form</h2>
            <br/>

            <div class="form-group row">
                <label for="userid" class="col-md-3 col-form-label">Status</label>
                <div class="col-md-5 ml-3"><label id="status1" name="status" class="btn btn-success text-light ml-5">Success</label></div>
            </div>

            <div class="form-group row">
                <label for="userid" class="col-md-3">Name</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" id="name" name="name" readonly>
                </div>
            </div>

            <div class="form-group row">
                <label for="userid" class="col-md-3">ID</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" id="id" name="id" readonly>
                </div>
            </div>

            <div class="form-group row">
                <label for="userid" class="col-md-3">Campus</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" id="campus" name="campus" readonly>
                </div>
            </div>

            <div class="form-group row">
                <label for="userid" class="col-md-3">CGPA</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" id="cg" name="cg" readonly>
                </div>
            </div>

            <div class="form-group row">
                <label for="userid" class="col-md-3">Email</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" id="email" name="email" readonly>
                </div>
            </div>

            <fieldset id="initialEntries">  

                <div class="form-group row">
                    <label for="userid" class="col-md-3">Reason of Query*</label>
                    <div class="col-md-9">
                        <select class="custom-select" id="natureOfQuery" name="natureOfQuery" required>
                            <option value="">Select</option>
                            <option value="0">Medical</option>
                            <option value="1">Non Medical</option>
                            <option value="3">Not Alloted</option>
                        </select>
                    </div>
                </div>

                <div class="form-group row" id="preferenceNumberDiv" name="preferenceNumberDiv">
                    <label for="userid" class="col-md-3 col-form-label">Description of Query*</label>
                    <div class="col-md-9">
                        <textarea class="form-control" id="description1" rows="5" cols="15" name="description" placeholder="Description" required></textarea>
                    </div>
                </div>

                <br>

                <p align="center">   Add your prefered stations(with location) in order from 1(most desired) to 10(least desired)</p>

                <p align="center" class="text-danger"> <b> Disclaimer </b> : While we will consider your preferences, it is not guaranteed <br> that the new station allotted to you will be from your given preferences </p>

                <div class="form-group row d-flex justify-content-center">
                    <!-- <label for="userid" class="col-sm-4 col-form-label">Pref. No.</label> -->
                    <label for="userid">Current Station Name</label>
                </div>

                <div class="form-group row">
                    <label for="userid" class="col-md-3">Allotted Station Name*</label>

                    <div class="col-md-9">
                        <input type="text" class="form-control" id="allocatedStation" name="allocatedStation" placeholder="XYZ Pvt. Ltd., Goa" required>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="userid" class="col-md-3">Pref No. of Alloted Station*</label>

                    <div class="col-md-9">
                        <input type="number" class="form-control" id="preferenceNumberOfAllocatedStation" name="preferenceNumberOfAllocatedStation" placeholder="As on PSMS" required>
                    </div>
                </div>

                <div class="form-group row d-flex justify-content-center">
                    <label for="userid" class="col-form-label">Prefered Station Names</label>
                </div>


                <div id="preferedStations">
                </div>

                <br>

                <h3 class="text-center">Supporting Documents</h3>
                <div id="file-uploads" name="file-uploads">
                    {% if attemptStatus.0 > 0 %}
                        <div class="text-center">
                        {% if formEntry.document1 %}
                            <a style="margin: 0 10px;" target="_blank" href='/media/{{ formEntry.document1 }}'>File 1</a>
                        {% else %}
                            <p style="color:red;"> No documents uploaded </p>
                        {% endif %}
                        {% if formEntry.document2 %}
                            <a style="margin: 0 10px;" target="_blank" href='/media/{{ formEntry.document2 }}'>File 2</a>
                        {% endif %}
                        {% if formEntry.document3 %}
                            <a style="margin: 0 10px;" target="_blank" href='/media/{{ formEntry.document3 }}'>File 3</a>
                        {% endif %}
                        {% if formEntry.document4 %}
                            <a style="margin: 0 10px;" target="_blank" href='/media/{{ formEntry.document4 }}'>File 4</a>
                        {% endif %}
                        {% if formEntry.document5 %}
                            <a style="margin: 0 10px;" target="_blank" href='/media/{{ formEntry.document5 }}'>File 5</a>
                        {% endif %}
                        </div>
                    {% else %}
                        <p class="text-center"> You can add upto 5 supporting documents (PDF Only) to support your Application. Each document should be less than 1 MB </p>

                        <div class="form-group row">
                            <div class="col-md-6">
                                <input type="file" accept=".pdf" name="document1" id="document1"></input>
                            </div>
                            <div class="col-md-6">
                                <input type="file" accept=".pdf" name="document2" id="document2"></input>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-6">
                                <input type="file" accept=".pdf" name="document3" id="document3"></input>
                            </div>
                            <div class="col-md-6">
                                <input type="file" accept=".pdf" name="document4" id="document4"></input>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-6">
                                <input type="file" accept=".pdf" name="document5" id="document5"></input>
                            </div>
                        </div>
                    {% endif %}
                </div>

                <br/>
                <br/>

                <!-- <h3 class="text-center">Supporting Documents</h3>
                {% if 1 %}
                    <p>Uploaded 
                            <a href="/media/"+{{ formEntry.document1 }}>File1</a>
                        </p>
                {% else %}
                    <p class="text-center"> You can add upto 5 supporting documents to support your Application. Each document should be less than 5 MB </p>
                    <div id="file-uploads" name="file-uploads">
                        
                            
                        <input type="file" name="document1" id="document1"></input>
                        <input type="file" name="document2" id="document2"></input>
                        <input type="file" name="document3" id="document3"></input>
                        <input type="file" name="document4" id="document4"></input>
                        <input type="file" name="document5" id="document5"></input>
                    </div>
                {% endif %}
                <br/>
                <br/> -->

     
            </fieldset>
            
            <div class="text-center" id="submitButton">
                <button type="submit1" value="submit1" name="submit1" id="submit1" class="btn btn-default" style="background-color: #428bca; color: white">Submit</button>
            </div>

            <div id="application1Comments">

                <div class="form-group row" id="preferenceNumberDiv" name="preferenceNumberDiv">
                    <label for="userid" class="col-md-3">Comments by authorities</label>
                    <div class="col-md-9">
                        <textarea class="form-control" id="comments1" rows="5" cols="15" name="comments1" readonly></textarea>
                    </div>
                </div>

                <div id="acception1Div" name="acception1Div">

                    <div class="form-group row">
                        <label for="userid" class="col-md-3">New Allotted Station</label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" id="newStation1" name="newStation1" readonly>
                        </div>
                    </div>

                </div>
            </div>
        </form>





        <!-- SCRIPT FOR NOT ALLOTED TYPE IN FORM 1 -->

        <script type="text/javascript">
            $(function() {
                $("#natureOfQuery").change(function() {
                    if($('option:selected', this).val() == 3){
                        
                        // set values
                        $('#description1').val("PS station not alloted");
                        $('#allocatedStation').val("Not Alloted");
                        $('#preferenceNumberOfAllocatedStation').val(0);
                        // disable fields
                        $('#description1').prop('readonly', true);
                        $('#allocatedStation').prop('readonly', true);
                        $('#preferenceNumberOfAllocatedStation').prop('readonly', true);

                    } else {

                        // reset values
                        $('#description1').val("");
                        $('#allocatedStation').val("");
                        $('#preferenceNumberOfAllocatedStation').val(null);
                        // enable fields
                        $('#description1').prop('readonly', false);
                        $('#allocatedStation').prop('readonly', false);
                        $('#preferenceNumberOfAllocatedStation').prop('readonly', false);

                    }
                });
            });
        </script>





        <form class="signup-form1 shadow p-3 mb-5 table-light rounded text-center" id="application2Form" action="" method="post" readonly> 
            {% csrf_token %}
            <div table-warning id="application2Div" name="application2Div">
                

                <h2 class="text-center"> Reapplication 1 </h2>
                <br/>

                <div class="form-group row">
                    <label for="userid" class="col-md-3 col-form-label">Status</label>
                    <div class="col-md-5 ml-3"><label id="status2" name="status" class="btn btn-success text-light ml-5">Success</label></div>
                </div>

                <fieldset id="application2Entries">
                    <div class="form-group row" id="preferenceNumberDiv" name="preferenceNumberDiv">
                        <label class="col-md-3">Description of Query*</label>
                        <div class="col-md-9">
                            <textarea class="form-control" id="description2" rows="4" cols="20" name="description" placeholder="Description" required></textarea>
                        </div>
                    </div>
                </fieldset>


                <div class="form-group text-center">
                    <button type="submit" id="submit2" name="submit2" value="submit2" class="btn btn-default" style="background-color: #428bca; color: white">Re-apply</button>
                </div>

                <div id="application2Comments">
                    <div class="form-group row" id="preferenceNumberDiv" name="preferenceNumberDiv">
                        <label class="col-md-3">Comments by authorities</label>
                        <div class="col-md-9">
                            <textarea class="form-control" id="comments2" rows="4" cols="20" name="comments2" readonly=""></textarea>
                        </div>
                    </div>

                    <div id="acception2Div" name="acception2Div">
                        <div class="form-group row">
                            <label class="col-md-3">New Allotted Station</label>
                            <div class="col-md-9">
                                <textarea class="form-control" id="newStation2" rows="4" cols="20" name="newStation2" readonly=""></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

        <form class="signup-form1 shadow p-3 mb-5 table-light rounded text-center" id="application3Form" action="" method="post" readonly> 
            {% csrf_token %}
            <div id="application3Div" name="application3Div">
                <h2 class="text-center"> Reapplication 2 </h2>
                <br/>

                <div class="form-group row">
                    <label for="userid" class="col-md-3 col-form-label">Status</label>
                    <div class="col-md-5 ml-3"><label id="status3" name="status" class="btn btn-success text-light ml-5">Success</label></div>
                </div>

                <fieldset id="application3Entries">
                    <div class="form-group row" id="preferenceNumberDiv" name="preferenceNumberDiv">
                        <label class="col-md-3">Description of Query*</label>
                        <div class="col-md-9">
                            <textarea class="form-control" id="description3" rows="4" cols="20" name="description" placeholder="Description" required></textarea>
                        </div>
                    </div>
                </fieldset>

                <div class="form-group text-center">
                    <button type="submit" id="submit3" name="submit3" value="submit3" class="btn btn-default" style="background-color: #428bca; color: white">Re-apply</button>
                </div>

                <div id="application3Comments">
                    <div class="form-group row" id="preferenceNumberDiv" name="preferenceNumberDiv">
                        <label class="col-md-3">Comments by authorities</label>
                        <div class="col-md-9">
                            <textarea class="form-control" id="comments3" rows="4" cols="20" name="comments3" readonly=""></textarea>
                        </div>
                    </div>

                    <div id="acception3Div" name="acception3Div">
                        <div class="form-group row">
                            <label class="col-md-3">New Allotted Station</label>
                            <div class="col-md-9">
                                <textarea class="form-control" id="newStation3" rows="4" cols="20" name="newStation3" readonly=""></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

        <div id="noMoreNonInformativeApplications">
            <p class="text-danger text-center"> No more applications allowed </p>
        </div>

        

        <script type="text/javascript">
                for(var i = 1; i <= 10; i++){
                    var row = document.createElement("div"); // the div of each stations
                    row.className = "form-group row";

                    // label which says "Prefered Station X"
                    var label = document.createElement("LABEL");
                    label.className = "col-md-3";
                    label.textContent = "Prefered Station " + i.toString();
                    if(i==1) label.textContent = "Prefered Station 1*";
                    row.appendChild(label);


                    // div of Prefered Station's Name input
                    var preferedStationNameDiv = document.createElement("div");
                    preferedStationNameDiv.className = "col-md-9";
                    var preferedStationNameInput = document.createElement("input");
                    preferedStationNameInput.type = "text";
                    preferedStationNameInput.className = "form-control";
                    preferedStationNameInput.name = "preferedStation" + i.toString(); 
                    preferedStationNameInput.id = "preferedStation" + i.toString();
                    preferedStationNameInput.placeholder = "XYZ Pvt. Ltd., Goa";
                    if(i == 1) preferedStationNameInput.required = true;
                    preferedStationNameDiv.appendChild(preferedStationNameInput);
                    row.appendChild(preferedStationNameDiv);
                    document.getElementById("preferedStations").appendChild(row);
                }

                function getStatusToWords(status_value){
                    if(status_value == 0){
                        return "Not Applied";
                    }
                    else if(status_value == 1){
                        return "In Progress";   
                    }
                    else if(status_value == 2){
                        return "Accepted";   
                    }
                    else if(status_value == 3){
                        return "Rejected";   
                    }
                }

                function getStatusClass(status_value){
                    if(status_value == 0){
                        return "btn btn-info text-light ml-5 px-5";
                    }
                    else if(status_value == 1){
                        return "btn btn-warning text-light ml-5 px-5";   
                    }
                    else if(status_value == 2){
                        return "btn btn-success text-light ml-5 px-5";   
                    }
                    else if(status_value == 3){
                        return "btn btn-danger text-light ml-5 px-5";   
                    }
                }

                function getCampusName(campus_value){
                    if(campus_value == 0){
                        return "Goa";
                    }
                    else if(campus_value == 1){
                        return "Hyderabad";   
                    }
                    else if(campus_value == 2){
                        return "Pilani";   
                    }
                    else if(campus_value == 3){
                        return "Invalid";   
                    }
                }
                var fileUploadsDiv = document.getElementById("file-uploads");
                fileUploadsDiv.onchange = function() {
                    for(var i = 1; i <= 5; i++){
                        var file = document.getElementById("document" + i.toString());
                        if(file.files.length == 0) continue;
                        if(file.files[0].size > 1048576){
                            alert("Max size allowed is 1 MB");
                            file.value = "";
                        };
                    }
                };

                document.getElementById("name").value = "{{ name }}";
                document.getElementById("campus").value = getCampusName({{ campus }});
                document.getElementById("cg").value = "{{ cg }}";
                document.getElementById("id").value = "{{ id }}";
                document.getElementById("email").value = "{{ email }}";
                document.getElementById("natureOfQuery").value = "{{ formEntry.natureOfQuery }}";
                document.getElementById("allocatedStation").value = "{{ formEntry.allocatedStation }}";
                document.getElementById("preferenceNumberOfAllocatedStation").value = "{{ formEntry.preferenceNumberOfAllocatedStation }}";

                document.getElementById("preferedStation1").value = "{{ formEntry.preferedStation1 }}";
                document.getElementById("preferedStation2").value = "{{ formEntry.preferedStation2 }}";
                document.getElementById("preferedStation3").value = "{{ formEntry.preferedStation3 }}";
                document.getElementById("preferedStation4").value = "{{ formEntry.preferedStation4 }}";
                document.getElementById("preferedStation5").value = "{{ formEntry.preferedStation5 }}";
                document.getElementById("preferedStation6").value = "{{ formEntry.preferedStation6 }}";
                document.getElementById("preferedStation7").value = "{{ formEntry.preferedStation7 }}";
                document.getElementById("preferedStation8").value = "{{ formEntry.preferedStation8 }}";
                document.getElementById("preferedStation9").value = "{{ formEntry.preferedStation9 }}";
                document.getElementById("preferedStation10").value = "{{ formEntry.preferedStation10 }}";

                var descriptions = {{ descriptions|safe }};
                var comments = {{ comments|safe }};
                var newStations = {{ newStation|safe }};
                var statuses = {{ attemptStatus|safe }};

                if(statuses[0]!= 0){
                    for(var i = 2; i <= 10; i++){
                        document.getElementById("preferedStation" + i.toString()).placeholder = "";
                    }
                }

                for(var i = 1; i <= 3; i++){
                    var element = "description" + i.toString();
                    document.getElementById(element).value = descriptions[i - 1];

                    element = "status" + i.toString();
                    document.getElementById(element).textContent = getStatusToWords(statuses[i - 1]);
                    document.getElementById(element).className = getStatusClass(statuses[i - 1]);

                    element = "newStation" + i.toString();
                    document.getElementById(element).value = newStations[i - 1];

                    element = "comments" + i.toString();
                    document.getElementById(element).value = comments[i - 1];
                }
                if(!(statuses[1] >= 2)){
                    document.getElementById("noMoreNonInformativeApplications").style.display = "none";
                }
                if(statuses[0] == 0){
                    document.getElementById("application1Comments").style.display = "none";
                    document.getElementById("application2Form").style.display = "none";
                }
                else if(statuses[0] == 1){
                    document.getElementById("initialEntries").disabled="disabled";
                    document.getElementById("submit1").style.display = "none";
                    document.getElementById("application1Comments").style.display = "none";
                    document.getElementById("application2Form").style.display = "none";
                }
                else if(statuses[0] == 2){
                    document.getElementById("initialEntries").disabled="disabled";
                    document.getElementById("submit1").style.display = "none";
                }
                else if(statuses[0] == 3){
                    document.getElementById("initialEntries").disabled="disabled";
                    document.getElementById("submit1").style.display = "none";
                    document.getElementById("acception1Div").style.display = "none";
                }

                if(statuses[1] == 0){
                    document.getElementById("application2Comments").style.display = "none";
                    document.getElementById("application3Form").style.display = "none";
                }
                else if(statuses[1] == 1){
                    document.getElementById("application2Entries").disabled="disabled";
                    document.getElementById("submit2").style.display = "none";
                    document.getElementById("application2Comments").style.display = "none";
                    document.getElementById("application3Form").style.display = "none";
                }
                else if(statuses[1] == 2){
                    document.getElementById("application2Entries").disabled="disabled";
                    document.getElementById("submit2").style.display = "none";
                }
                else if(statuses[1] == 3){
                    document.getElementById("application2Entries").disabled="disabled";
                    document.getElementById("submit2").style.display = "none";
                    document.getElementById("acception2Div").style.display = "none";
                }

                if(statuses[2] == 0){
                    document.getElementById("application3Comments").style.display = "none";
                }
                else if(statuses[2] == 1){
                    document.getElementById("application3Entries").disabled="disabled";
                    document.getElementById("submit3").style.display = "none";
                    document.getElementById("application3Comments").style.display = "none";
                }
                else if(statuses[2] == 2){
                    document.getElementById("application3Entries").disabled="disabled";
                    document.getElementById("submit3").style.display = "none";
                }
                else if(statuses[2] == 3){
                    document.getElementById("application3Entries").disabled="disabled";
                    document.getElementById("submit3").style.display = "none";
                    document.getElementById("acception3Div").style.display = "none";
                } 

                var deadlineExpired = {{ expired }};
                // console.log(deadlineExpired);
                for(var i = 0; i <= 2; i++){
                    if(deadlineExpired[i]){
                        document.getElementById("submit" + (i + 1).toString()).disabled = true;
                    }
                }
        </script>
    </div>
</div>

<script type="text/javascript">
    var CURRENT_VIEW = 2;
    document.getElementById("informativeQueryDiv").style.display = "none";
    document.getElementById("nonInformativeQueryDiv").style.display = "none";
    function changeDisplayDiv(div_name){
        if(div_name == 1){
            document.getElementById("informativeQueryDiv").style.display = "none";
            document.getElementById("nonInformativeQueryDiv").style.display = "";
            document.getElementById("instructions").style.display = "none";
        }
        else if(div_name == 2){
            document.getElementById("informativeQueryDiv").style.display = "";
            document.getElementById("nonInformativeQueryDiv").style.display = "none";
            document.getElementById("instructions").style.display = "none";
        }
    }

</script>
    <!-- footer -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

        <style>
            .signup-form1 {
    width: 100%;
    min-width: 450px;
    color: black;
        }
        </style>

{% endblock %}